import{r as l,a as c,j as e,c as S}from"../chunks/storage.CGz3BxEU.js";const R=()=>{const[o,m]=l.useState("vocabulary"),[t,u]=l.useState(null),[i,b]=l.useState(null),[p,y]=l.useState([]),[N,x]=l.useState(!0),[E,k]=l.useState(!1),[C,F]=l.useState({targetLanguageWord:"",englishTranslation:"",tags:""});l.useEffect(()=>{v()},[]);const v=async()=>{try{x(!0),await c.initialize();const[s,a,r]=await Promise.all([c.getUserConfig(),c.getLearningStats(),c.getVocabulary()]);u(s),b(a),y(r)}catch(s){console.error("Failed to load data:",s)}finally{x(!1)}},w=async s=>{var r;const a=(r=s.target.files)==null?void 0:r[0];if(a){try{const n=await a.text(),g=JSON.parse(n);let h;Array.isArray(g)?(h=await c.importVocabulary(g,{allowDuplicates:!1,skipInvalid:!0}),alert(`Successfully imported ${h.imported} vocabulary items. Skipped ${h.skipped} duplicates/invalid items.`)):(h=await c.importFullData(n,{replaceExisting:!1,skipInvalid:!0}),alert(h.summary)),await v()}catch(n){console.error("Failed to import vocabulary:",n),alert(`Failed to import vocabulary: ${n instanceof Error?n.message:"Unknown error"}`)}s.target.value=""}},f=async()=>{try{const s=await c.exportData(),a=new Blob([s],{type:"application/json"}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=`hindi_vocabulary_backup_${new Date().toISOString().split("T")[0]}.json`,n.click(),URL.revokeObjectURL(r)}catch(s){console.error("Failed to export vocabulary:",s),alert(`Failed to export vocabulary: ${s instanceof Error?s.message:"Unknown error"}`)}},d=async s=>{if(t)try{const a={...t,...s};if(await c.setUserConfig(a),u(a),"dailyReviewTime"in s||"reviewRemindersEnabled"in s)try{await chrome.runtime.sendMessage({type:"RESCHEDULE_REVIEW_ALARM"}),console.log("Review alarm rescheduled")}catch(r){console.warn("Could not reschedule alarm:",r)}}catch(a){console.error("Failed to update config:",a),alert("Failed to save settings. Please try again.")}};return N?e.jsx("div",{className:"options-container loading",children:e.jsx("div",{className:"loading-spinner",children:"Loading..."})}):e.jsxs("div",{className:"options-container",children:[e.jsxs("header",{className:"options-header",children:[e.jsx("h1",{children:"📚 Hindi Language Learner"}),e.jsx("p",{children:"Manage your vocabulary and settings"})]}),e.jsxs("nav",{className:"options-nav",children:[e.jsx("button",{className:`nav-btn ${o==="vocabulary"?"active":""}`,onClick:()=>m("vocabulary"),children:"📝 Vocabulary"}),e.jsx("button",{className:`nav-btn ${o==="settings"?"active":""}`,onClick:()=>m("settings"),children:"⚙️ Settings"}),e.jsx("button",{className:`nav-btn ${o==="stats"?"active":""}`,onClick:()=>m("stats"),children:"📊 Statistics"})]}),e.jsxs("main",{className:"options-content",children:[o==="vocabulary"&&e.jsxs("div",{className:"vocabulary-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Vocabulary Management"}),e.jsxs("div",{className:"vocabulary-actions",children:[e.jsx("input",{type:"file",accept:".json",onChange:w,style:{display:"none"},id:"import-input"}),e.jsx("label",{htmlFor:"import-input",className:"btn btn-secondary",children:"📁 Import JSON"}),e.jsx("button",{className:"btn btn-primary",onClick:f,children:"💾 Export"})]})]}),e.jsxs("div",{className:"vocabulary-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:p.length}),e.jsx("span",{className:"stat-label",children:"Total Words"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:(i==null?void 0:i.dueToday)||0}),e.jsx("span",{className:"stat-label",children:"Due Today"})]})]}),e.jsxs("div",{className:"vocabulary-list",children:[e.jsxs("div",{className:"vocabulary-header",children:[e.jsx("span",{children:"Hindi"}),e.jsx("span",{children:"English"}),e.jsx("span",{children:"Next Review"}),e.jsx("span",{children:"Actions"})]}),p.map(s=>e.jsxs("div",{className:"vocabulary-item",children:[e.jsx("span",{className:"hindi-word",children:s.targetLanguageWord}),e.jsx("span",{className:"english-word",children:s.englishTranslation}),e.jsx("span",{className:"next-review",children:new Date(s.srsData.nextReviewDate).toLocaleDateString()}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-small",children:"✏️"}),e.jsx("button",{className:"btn-small",children:"🗑️"})]})]},s.id))]})]}),o==="settings"&&t&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h2",{children:"Settings"}),e.jsxs("div",{className:"setting-group",children:[e.jsx("h3",{children:"🔊 Text-to-Speech"}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"tts-voice",children:"Voice:"}),e.jsxs("select",{id:"tts-voice",value:t.ttsVoice,children:[e.jsx("option",{value:"Google Hindi",children:"Google Hindi"}),e.jsx("option",{value:"Microsoft Hindi",children:"Microsoft Hindi"})]})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"speech-rate",children:"Speech Rate:"}),e.jsx("input",{type:"range",id:"speech-rate",min:"0.1",max:"2",step:"0.1",value:t.speechRate}),e.jsxs("span",{children:[t.speechRate,"x"]})]})]}),e.jsxs("div",{className:"setting-group",children:[e.jsx("h3",{children:"🔔 Notifications & Reviews"}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"notifications",children:"Enable Notifications:"}),e.jsx("input",{type:"checkbox",id:"notifications",checked:t.notificationsEnabled,onChange:s=>d({notificationsEnabled:s.target.checked})})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"review-reminders",children:"Daily Review Reminders:"}),e.jsx("input",{type:"checkbox",id:"review-reminders",checked:t.reviewRemindersEnabled,onChange:s=>d({reviewRemindersEnabled:s.target.checked})})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"review-time",children:"Daily Review Time:"}),e.jsx("input",{type:"time",id:"review-time",value:`${t.dailyReviewTime.toString().padStart(2,"0")}:00`,onChange:s=>{const a=parseInt(s.target.value.split(":")[0],10);d({dailyReviewTime:a})},disabled:!t.reviewRemindersEnabled})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"quiet-start",children:"Quiet Hours Start:"}),e.jsx("input",{type:"time",id:"quiet-start",value:`${t.quietHoursStart.toString().padStart(2,"0")}:00`,onChange:s=>{const a=parseInt(s.target.value.split(":")[0],10);d({quietHoursStart:a})}})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"quiet-end",children:"Quiet Hours End:"}),e.jsx("input",{type:"time",id:"quiet-end",value:`${t.quietHoursEnd.toString().padStart(2,"0")}:00`,onChange:s=>{const a=parseInt(s.target.value.split(":")[0],10);d({quietHoursEnd:a})}})]})]})]}),o==="stats"&&i&&e.jsxs("div",{className:"stats-section",children:[e.jsx("h2",{children:"Learning Statistics"}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card large",children:[e.jsx("span",{className:"stat-number",children:i.totalReviews}),e.jsx("span",{className:"stat-label",children:"Total Reviews"})]}),e.jsxs("div",{className:"stat-card large",children:[e.jsxs("span",{className:"stat-number",children:[Math.round(i.accuracyRate*100),"%"]}),e.jsx("span",{className:"stat-label",children:"Accuracy Rate"})]}),e.jsxs("div",{className:"stat-card large",children:[e.jsx("span",{className:"stat-number",children:i.streak}),e.jsx("span",{className:"stat-label",children:"Day Streak"})]})]}),e.jsxs("div",{className:"progress-section",children:[e.jsx("h3",{children:"Today's Progress"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${i.reviewedToday/(i.dueToday||1)*100}%`}})}),e.jsxs("p",{children:[i.reviewedToday," of ",i.dueToday," reviews completed today"]})]})]})]})]})},j=document.getElementById("root");j?S(j).render(e.jsx(R,{})):console.error("Failed to find root element");
