import{r as t,S as o,j as e,c as f}from"../chunks/storage.CF9ZhM42.js";const C=()=>{const[l,m]=t.useState("vocabulary"),[i,h]=t.useState(null),[r,y]=t.useState(null),[x,b]=t.useState([]),[N,p]=t.useState(!0),[R,E]=t.useState(!1),[k,F]=t.useState({targetLanguageWord:"",englishTranslation:"",tags:""}),[L,D]=t.useState([]),[T,H]=t.useState([]),[$,I]=t.useState(null),[A,V]=t.useState(null),[q,U]=t.useState(!1),[M,O]=t.useState({totalDays:30,wordsPerDay:10,organizationStrategy:"by_category"});t.useEffect(()=>{j()},[]);const j=async()=>{try{p(!0),await o.initialize();const[s,a,c]=await Promise.all([o.getUserConfig(),o.getLearningStats(),o.getVocabulary()]);h(s),y(a),b(c)}catch(s){console.error("Failed to load data:",s)}finally{p(!1)}},w=async s=>{var c;const a=(c=s.target.files)==null?void 0:c[0];if(a){try{const n=await a.text(),v=JSON.parse(n);let u;Array.isArray(v)?(u=await o.importVocabulary(v,{allowDuplicates:!1,skipInvalid:!0}),alert(`Successfully imported ${u.imported} vocabulary items. Skipped ${u.skipped} duplicates/invalid items.`)):(u=await o.importFullData(n,{replaceExisting:!1,skipInvalid:!0}),alert(u.summary)),await j()}catch(n){console.error("Failed to import vocabulary:",n),alert(`Failed to import vocabulary: ${n instanceof Error?n.message:"Unknown error"}`)}s.target.value=""}},S=async()=>{try{const s=await o.exportData(),a=new Blob([s],{type:"application/json"}),c=URL.createObjectURL(a),n=document.createElement("a");n.href=c,n.download=`hindi_vocabulary_backup_${new Date().toISOString().split("T")[0]}.json`,n.click(),URL.revokeObjectURL(c)}catch(s){console.error("Failed to export vocabulary:",s),alert(`Failed to export vocabulary: ${s instanceof Error?s.message:"Unknown error"}`)}},d=async s=>{if(i)try{const a={...i,...s};if(await o.setUserConfig(a),h(a),"dailyReviewTime"in s||"reviewRemindersEnabled"in s)try{await chrome.runtime.sendMessage({type:"RESCHEDULE_REVIEW_ALARM"}),console.log("Review alarm rescheduled")}catch(c){console.warn("Could not reschedule alarm:",c)}}catch(a){console.error("Failed to update config:",a),alert("Failed to save settings. Please try again.")}};return N?e.jsx("div",{className:"options-container loading",children:e.jsx("div",{className:"loading-spinner",children:"Loading..."})}):e.jsxs("div",{className:"options-container",children:[e.jsxs("header",{className:"options-header",children:[e.jsx("h1",{children:"üìö Hindi Language Learner"}),e.jsx("p",{children:"Manage your vocabulary and settings"})]}),e.jsxs("nav",{className:"options-nav",children:[e.jsx("button",{className:`nav-btn ${l==="vocabulary"?"active":""}`,onClick:()=>m("vocabulary"),children:"üìù Vocabulary"}),e.jsx("button",{className:`nav-btn ${l==="curriculum"?"active":""}`,onClick:()=>m("curriculum"),children:"üìö Curriculum"}),e.jsx("button",{className:`nav-btn ${l==="settings"?"active":""}`,onClick:()=>m("settings"),children:"‚öôÔ∏è Settings"}),e.jsx("button",{className:`nav-btn ${l==="stats"?"active":""}`,onClick:()=>m("stats"),children:"üìä Statistics"})]}),e.jsxs("main",{className:"options-content",children:[l==="vocabulary"&&e.jsxs("div",{className:"vocabulary-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Vocabulary Management"}),e.jsxs("div",{className:"vocabulary-actions",children:[e.jsx("input",{type:"file",accept:".json",onChange:w,style:{display:"none"},id:"import-input"}),e.jsx("label",{htmlFor:"import-input",className:"btn btn-secondary",children:"üìÅ Import JSON"}),e.jsx("button",{className:"btn btn-primary",onClick:S,children:"üíæ Export"})]})]}),e.jsxs("div",{className:"vocabulary-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:x.length}),e.jsx("span",{className:"stat-label",children:"Total Words"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:(r==null?void 0:r.dueToday)||0}),e.jsx("span",{className:"stat-label",children:"Due Today"})]})]}),e.jsxs("div",{className:"vocabulary-list",children:[e.jsxs("div",{className:"vocabulary-header",children:[e.jsx("span",{children:"Hindi"}),e.jsx("span",{children:"English"}),e.jsx("span",{children:"Next Review"}),e.jsx("span",{children:"Actions"})]}),x.map(s=>e.jsxs("div",{className:"vocabulary-item",children:[e.jsx("span",{className:"hindi-word",children:s.targetLanguageWord}),e.jsx("span",{className:"english-word",children:s.englishTranslation}),e.jsx("span",{className:"next-review",children:new Date(s.srsData.nextReviewDate).toLocaleDateString()}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn-small",children:"‚úèÔ∏è"}),e.jsx("button",{className:"btn-small",children:"üóëÔ∏è"})]})]},s.id))]})]}),l==="settings"&&i&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h2",{children:"Settings"}),e.jsxs("div",{className:"setting-group",children:[e.jsx("h3",{children:"üîä Text-to-Speech"}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"tts-voice",children:"Voice:"}),e.jsxs("select",{id:"tts-voice",value:i.ttsVoice,children:[e.jsx("option",{value:"Google Hindi",children:"Google Hindi"}),e.jsx("option",{value:"Microsoft Hindi",children:"Microsoft Hindi"})]})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"speech-rate",children:"Speech Rate:"}),e.jsx("input",{type:"range",id:"speech-rate",min:"0.1",max:"2",step:"0.1",value:i.speechRate}),e.jsxs("span",{children:[i.speechRate,"x"]})]})]}),e.jsxs("div",{className:"setting-group",children:[e.jsx("h3",{children:"üîî Notifications & Reviews"}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"notifications",children:"Enable Notifications:"}),e.jsx("input",{type:"checkbox",id:"notifications",checked:i.notificationsEnabled,onChange:s=>d({notificationsEnabled:s.target.checked})})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"review-reminders",children:"Daily Review Reminders:"}),e.jsx("input",{type:"checkbox",id:"review-reminders",checked:i.reviewRemindersEnabled,onChange:s=>d({reviewRemindersEnabled:s.target.checked})})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"review-time",children:"Daily Review Time:"}),e.jsx("input",{type:"time",id:"review-time",value:`${i.dailyReviewTime.toString().padStart(2,"0")}:00`,onChange:s=>{const a=parseInt(s.target.value.split(":")[0],10);d({dailyReviewTime:a})},disabled:!i.reviewRemindersEnabled})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"quiet-start",children:"Quiet Hours Start:"}),e.jsx("input",{type:"time",id:"quiet-start",value:`${i.quietHoursStart.toString().padStart(2,"0")}:00`,onChange:s=>{const a=parseInt(s.target.value.split(":")[0],10);d({quietHoursStart:a})}})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"quiet-end",children:"Quiet Hours End:"}),e.jsx("input",{type:"time",id:"quiet-end",value:`${i.quietHoursEnd.toString().padStart(2,"0")}:00`,onChange:s=>{const a=parseInt(s.target.value.split(":")[0],10);d({quietHoursEnd:a})}})]})]})]}),l==="stats"&&r&&e.jsxs("div",{className:"stats-section",children:[e.jsx("h2",{children:"Learning Statistics"}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card large",children:[e.jsx("span",{className:"stat-number",children:r.totalReviews}),e.jsx("span",{className:"stat-label",children:"Total Reviews"})]}),e.jsxs("div",{className:"stat-card large",children:[e.jsxs("span",{className:"stat-number",children:[Math.round(r.accuracyRate*100),"%"]}),e.jsx("span",{className:"stat-label",children:"Accuracy Rate"})]}),e.jsxs("div",{className:"stat-card large",children:[e.jsx("span",{className:"stat-number",children:r.streak}),e.jsx("span",{className:"stat-label",children:"Day Streak"})]})]}),e.jsxs("div",{className:"progress-section",children:[e.jsx("h3",{children:"Today's Progress"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${r.reviewedToday/(r.dueToday||1)*100}%`}})}),e.jsxs("p",{children:[r.reviewedToday," of ",r.dueToday," reviews completed today"]})]})]}),l==="curriculum"&&e.jsxs("div",{className:"curriculum-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"üéØ Speed Learn Curriculum"}),e.jsx("p",{className:"text-gray-600",children:"Speed Learn automatically uses HindiEasy curriculum with 31 fruit words"})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-4",children:[e.jsx("h3",{className:"font-medium text-green-800 mb-3",children:"‚úÖ System Status"}),e.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[e.jsx("p",{children:"üéµ Speed Learn automatically uses Source1 (HindiEasy)"}),e.jsx("p",{children:"üçé 31 fruit words organized into daily lessons"}),e.jsx("p",{children:"üìö 6 words per lesson with automatic progression"}),e.jsx("p",{children:'ÔøΩ "Fruits" and "Fruits continuation" lessons'}),e.jsx("p",{children:"‚ö° No user setup required - works automatically"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"font-medium text-blue-800 mb-3",children:"ÔøΩ How It Works"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[e.jsx("p",{children:"1. Click Speed Learn in the extension popup"}),e.jsx("p",{children:"2. System automatically initializes HindiEasy curriculum"}),e.jsx("p",{children:'3. Starts with "Fruits" lesson (6 words)'}),e.jsx("p",{children:'4. Next session shows "Fruits continuation"'}),e.jsx("p",{children:"5. Continues through all 31 words automatically"})]})]})]})]})]})},g=document.getElementById("root");g?f(g).render(e.jsx(C,{})):console.error("Failed to find root element");
