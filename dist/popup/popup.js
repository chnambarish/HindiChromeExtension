const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["chunks/curriculum-demo.8J5MLMuR.js","chunks/storage.CF9ZhM42.js"])))=>i.map(i=>d[i]);
import{S,a as f,r as m,j as s,c as G}from"../chunks/storage.CF9ZhM42.js";const $="modulepreload",H=function(i){return"/"+i},A={},U=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),c=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));n=Promise.allSettled(t.map(u=>{if(u=H(u),u in A)return;A[u]=!0;const p=u.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${x}`))return;const h=document.createElement("link");if(h.rel=p?"stylesheet":$,p||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),p)return new Promise((l,w)=>{h.addEventListener("load",l),h.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(d){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=d,window.dispatchEvent(c),!c.defaultPrevented)throw d}return n.then(d=>{for(const c of d||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};class z{constructor(e){this.currentSession=null,this.isPlaying=!1,this.isPaused=!1,this.currentWordIndex=0,this.currentRepetition=0,this.sessionWords=[],this.audioQueue=[],this.isProcessingAudio=!1,this.storageManager=e,this.config=this.getDefaultConfig()}getDefaultConfig(){return{repetitionsPerSession:3,wordPause:800,sentencePause:1200,maxWordsPerSession:15,enableBackgroundMusic:!1,speechSpeed:1,exposuresBeforeMastery:5}}async startSession(e){if(this.isPlaying)throw new Error("Session already in progress");if(e&&(this.config={...this.config,...e}),this.sessionWords=await this.getSessionWords(),this.sessionWords.length===0)throw new Error("No words available for Speed Learn session");return this.currentSession={id:`speed-learn-${Date.now()}`,startTime:Date.now(),itemsPlayed:[],repetitionsCompleted:0,completed:!1},this.currentWordIndex=0,this.currentRepetition=0,this.isPlaying=!0,this.isPaused=!1,await this.playCurrentWord(),this.currentSession}async startSessionWithVocabulary(e,t){if(this.isPlaying)throw new Error("Session already in progress");if(!e||e.length===0)throw new Error("No vocabulary provided for session");return t&&(this.config={...this.config,...t}),this.sessionWords=e,this.currentSession={id:`speed-learn-curriculum-${Date.now()}`,startTime:Date.now(),itemsPlayed:[],repetitionsCompleted:0,completed:!1},this.currentWordIndex=0,this.currentRepetition=0,this.isPlaying=!0,this.isPaused=!1,await this.playCurrentWord(),this.currentSession}async getSessionWords(){const e=await S.getVocabulary();console.log("Total vocabulary items:",e.length);const t=e.filter(n=>!n.srsData.speedLearnStage||n.srsData.exposureCount===void 0);t.length>0&&(console.warn("Found vocabulary items without Speed Learn fields:",t.length),await S.initialize());const r=e.filter(n=>n.srsData.speedLearnStage===f.NEW||n.srsData.speedLearnStage===f.PASSIVE_LEARNING);return console.log("New learning words available:",r.length),console.log("Speed Learn is purely for NEW learning - reviews stay in Reviews tab"),r.length===0&&e.length>0?(console.log("No items with Speed Learn stages found, treating all as new"),e.slice(0,this.config.maxWordsPerSession)):r.slice(0,this.config.maxWordsPerSession)}async playCurrentWord(){var t,r;if(!this.isPlaying||this.isPaused||!this.currentSession)return;const e=this.sessionWords[this.currentWordIndex];if(!e){await this.completeSession();return}(t=this.onWordStart)==null||t.call(this,e,this.currentRepetition+1),this.audioQueue=[()=>this.speakText(e.targetLanguageWord,"hi-IN"),()=>this.pause(this.config.wordPause),()=>this.speakText(e.englishTranslation,"en-US"),()=>this.pause(this.config.sentencePause)],await this.processAudioQueue(),await this.updateWordExposure(e),(r=this.onWordComplete)==null||r.call(this,e,this.currentRepetition+1),await this.advanceToNext()}async processAudioQueue(){if(!this.isProcessingAudio){for(this.isProcessingAudio=!0;this.audioQueue.length>0&&this.isPlaying&&!this.isPaused;){const e=this.audioQueue.shift();e&&await e()}this.isProcessingAudio=!1}}speakText(e,t){return new Promise((r,n)=>{if(!this.isPlaying||this.isPaused){r();return}const a=new SpeechSynthesisUtterance(e);a.lang=t,a.rate=this.config.speechSpeed,a.pitch=1,a.volume=1,a.onend=()=>r(),a.onerror=d=>{console.warn("TTS error:",d),r()},speechSynthesis.speak(a)})}pause(e){return new Promise(t=>{if(!this.isPlaying||this.isPaused){t();return}setTimeout(t,e)})}async updateWordExposure(e){const t={...e};t.srsData.exposureCount=(t.srsData.exposureCount||0)+1,t.srsData.lastSpeedLearnSession=Date.now(),t.srsData.exposureCount>=this.config.exposuresBeforeMastery?(t.srsData.speedLearnStage=f.MASTERED,t.srsData.masteredAt=Date.now(),t.srsData.interval=1,t.srsData.nextReviewDate=Date.now()+24*60*60*1e3,t.srsData.repetitions=0,console.log(`Word "${t.targetLanguageWord}" mastered via Speed Learn - now in Reviews tab only`)):t.srsData.speedLearnStage===f.NEW&&(t.srsData.speedLearnStage=f.PASSIVE_LEARNING),await S.updateVocabularyItem(t),this.currentSession&&!this.currentSession.itemsPlayed.includes(e.id)&&this.currentSession.itemsPlayed.push(e.id)}async advanceToNext(){if(!(!this.isPlaying||!this.currentSession)){if(this.currentWordIndex++,this.currentWordIndex>=this.sessionWords.length){if(this.currentRepetition++,this.currentSession.repetitionsCompleted=this.currentRepetition,this.currentRepetition>=this.config.repetitionsPerSession){await this.completeSession();return}this.currentWordIndex=0}setTimeout(()=>this.playCurrentWord(),100)}}async completeSession(){var e;this.currentSession&&(this.currentSession.endTime=Date.now(),this.currentSession.completed=!0,this.currentSession.duration=this.currentSession.endTime-this.currentSession.startTime,this.isPlaying=!1,this.isPaused=!1,await this.saveSession(this.currentSession),(e=this.onSessionComplete)==null||e.call(this,this.currentSession),this.currentSession=null)}pauseSession(){var e;this.isPlaying&&(this.isPaused=!0,speechSynthesis.cancel(),(e=this.onSessionPause)==null||e.call(this))}resumeSession(){var e;!this.isPlaying||!this.isPaused||(this.isPaused=!1,(e=this.onSessionResume)==null||e.call(this),setTimeout(()=>this.playCurrentWord(),100))}async stopSession(){!this.isPlaying||!this.currentSession||(speechSynthesis.cancel(),this.currentSession.endTime=Date.now(),this.currentSession.completed=!1,this.currentSession.duration=this.currentSession.endTime-this.currentSession.startTime,await this.saveSession(this.currentSession),this.isPlaying=!1,this.isPaused=!1,this.currentSession=null)}async saveSession(e){const t=await this.getStoredSessions();t.push(e);const r=t.slice(-50);await chrome.storage.local.set({speedLearnSessions:r})}async getStoredSessions(){return(await chrome.storage.local.get(["speedLearnSessions"])).speedLearnSessions||[]}async getLearningProgress(){const e=await S.getVocabulary();return{newWords:e.filter(t=>t.srsData.speedLearnStage===f.NEW).length,learningWords:e.filter(t=>t.srsData.speedLearnStage===f.PASSIVE_LEARNING).length,masteredWords:e.filter(t=>t.srsData.speedLearnStage===f.MASTERED).length,totalInTraditionalReviews:e.filter(t=>t.srsData.speedLearnStage===f.MASTERED&&t.srsData.nextReviewDate<=Date.now()).length}}setOnWordStart(e){this.onWordStart=e}setOnWordComplete(e){this.onWordComplete=e}setOnSessionComplete(e){this.onSessionComplete=e}setOnSessionPause(e){this.onSessionPause=e}setOnSessionResume(e){this.onSessionResume=e}getCurrentSession(){return this.currentSession}isSessionActive(){return this.isPlaying}isSessionPaused(){return this.isPaused}getCurrentProgress(){return{wordIndex:this.currentWordIndex,repetition:this.currentRepetition,totalWords:this.sessionWords.length}}}var T=(i=>(i.NOT_STARTED="not_started",i.IN_PROGRESS="in_progress",i.COMPLETED="completed",i.MASTERED="mastered",i))(T||{}),Y=(i=>(i.BY_CATEGORY="by_category",i.BY_DIFFICULTY="by_difficulty",i.MIXED_CATEGORIES="mixed_categories",i.BY_FREQUENCY="by_frequency",i.CUSTOM_ORDER="custom_order",i))(Y||{}),B=(i=>(i.NEXT_IN_SEQUENCE="next_in_sequence",i.REVIEW_DUE="review_due",i.CATEGORY_CONTINUATION="category_continuation",i.DIFFICULTY_APPROPRIATE="difficulty_appropriate",i.TIME_AVAILABLE="time_available",i.USER_PREFERENCE="user_preference",i))(B||{});const g={DAILY_LESSONS:"dailyLessons",LESSON_PROGRESS:"lessonProgress",CURRICULUM_CONFIG:"curriculumConfig",CURRICULUM_OVERVIEW:"curriculumOverview",CURRENT_LESSON:"currentLesson"},q={wordsPerDay:10,maxWordsPerLesson:15,minWordsPerLesson:5,autoAdvance:!0,requireSequentialCompletion:!1,preferredCategories:["greetings","numbers","colors","family","food","fruits","vegetables","animals","body","clothing"],skipWeekends:!1,preferredLessonDuration:15};class D extends S{static async getDailyLessons(){return(await chrome.storage.local.get(g.DAILY_LESSONS))[g.DAILY_LESSONS]||[]}static async setDailyLessons(e){await chrome.storage.local.set({[g.DAILY_LESSONS]:e})}static async addDailyLesson(e){const t=await this.getDailyLessons();t.push(e),await this.setDailyLessons(t)}static async updateDailyLesson(e){const t=await this.getDailyLessons(),r=t.findIndex(n=>n.id===e.id);if(r===-1)throw new Error(`Daily lesson with id ${e.id} not found`);t[r]={...e,updatedAt:Date.now()},await this.setDailyLessons(t)}static async deleteDailyLesson(e){const t=await this.getDailyLessons(),r=t.filter(n=>n.id!==e);if(r.length===t.length)throw new Error(`Daily lesson with id ${e} not found`);await this.setDailyLessons(r)}static async getDailyLesson(e){return(await this.getDailyLessons()).find(r=>r.id===e)||null}static async getLessonsByCategory(e){return(await this.getDailyLessons()).filter(r=>r.category===e)}static async getLessonsByDayRange(e,t){return(await this.getDailyLessons()).filter(n=>n.dayNumber>=e&&n.dayNumber<=t).sort((n,a)=>n.dayNumber-a.dayNumber)}static async getLessonProgress(){return(await chrome.storage.local.get(g.LESSON_PROGRESS))[g.LESSON_PROGRESS]||[]}static async setLessonProgress(e){await chrome.storage.local.set({[g.LESSON_PROGRESS]:e})}static async getLessonProgressById(e){return(await this.getLessonProgress()).find(r=>r.lessonId===e)||null}static async updateLessonProgress(e){const t=await this.getLessonProgress(),r=t.findIndex(a=>a.lessonId===e.lessonId),n={...e,lastActivity:Date.now()};r===-1?t.push(n):t[r]=n,await this.setLessonProgress(t)}static async initializeLessonProgress(e,t){const r={lessonId:e,status:T.NOT_STARTED,wordsCompleted:0,totalWords:t,timeSpent:0,speedLearnSessions:0,reviewSessions:0,accuracy:0,lastActivity:Date.now()};return await this.updateLessonProgress(r),r}static async getCurriculumConfig(){return(await chrome.storage.sync.get(g.CURRICULUM_CONFIG))[g.CURRICULUM_CONFIG]||q}static async setCurriculumConfig(e){await chrome.storage.sync.set({[g.CURRICULUM_CONFIG]:e})}static async updateCurriculumConfig(e){const r={...await this.getCurriculumConfig(),...e};await this.setCurriculumConfig(r)}static async getCurriculumOverview(){return(await chrome.storage.local.get(g.CURRICULUM_OVERVIEW))[g.CURRICULUM_OVERVIEW]||null}static async setCurriculumOverview(e){await chrome.storage.local.set({[g.CURRICULUM_OVERVIEW]:e})}static async getCurrentLessonId(){return(await chrome.storage.local.get(g.CURRENT_LESSON))[g.CURRENT_LESSON]||null}static async setCurrentLessonId(e){e?await chrome.storage.local.set({[g.CURRENT_LESSON]:e}):await chrome.storage.local.remove(g.CURRENT_LESSON)}static async getCurrentLesson(){const e=await this.getCurrentLessonId();return e?await this.getDailyLesson(e):null}static async getCurriculumStats(){const[e,t]=await Promise.all([this.getDailyLessons(),this.getLessonProgress()]),r=new Map(t.map(h=>[h.lessonId,h]));let n=0,a=0,d=0,c=0,u=0,p=0,x=0;return e.forEach(h=>{d+=h.vocabularyItems.length;const l=r.get(h.id);l&&(l.status==="completed"||l.status==="mastered"?n++:l.status==="in_progress"&&a++,c+=l.wordsCompleted,p+=l.timeSpent,l.accuracy>0&&(u+=l.accuracy,x++))}),{totalLessons:e.length,completedLessons:n,inProgressLessons:a,totalWords:d,masteredWords:c,completionRate:e.length>0?n/e.length:0,averageAccuracy:x>0?u/x:0,totalTimeSpent:p}}static async exportCurriculumData(){const[e,t,r,n]=await Promise.all([this.getDailyLessons(),this.getLessonProgress(),this.getCurriculumConfig(),this.getCurriculumOverview()]),a={version:chrome.runtime.getManifest().version,exportDate:new Date().toISOString(),curriculum:{lessons:e,progressData:t,config:r,overview:n}};return JSON.stringify(a,null,2)}static async importCurriculumData(e){try{const t=JSON.parse(e);if(!t.curriculum)throw new Error("Invalid curriculum data format");const{lessons:r,progressData:n,config:a}=t.curriculum;let d=0,c=0,u=!1;return r&&Array.isArray(r)&&(await this.setDailyLessons(r),d=r.length),n&&Array.isArray(n)&&(await this.setLessonProgress(n),c=n.length),a&&(await this.setCurriculumConfig(a),u=!0),{success:!0,message:`Successfully imported ${d} lessons, ${c} progress entries${u?", and configuration":""}`,imported:{lessons:d,progressData:c,configImported:u}}}catch(t){return{success:!1,message:`Import failed: ${t instanceof Error?t.message:"Unknown error"}`,imported:{lessons:0,progressData:0,configImported:!1}}}}static async clearCurriculumData(){await Promise.all([chrome.storage.local.remove(g.DAILY_LESSONS),chrome.storage.local.remove(g.LESSON_PROGRESS),chrome.storage.local.remove(g.CURRICULUM_OVERVIEW),chrome.storage.local.remove(g.CURRENT_LESSON),chrome.storage.sync.remove(g.CURRICULUM_CONFIG)])}}const Q=({storageManager:i})=>{const[e]=m.useState(()=>new z(i)),[t,r]=m.useState(!1),[n,a]=m.useState(!1),[d,c]=m.useState(null),[u,p]=m.useState(null),[x,h]=m.useState({wordIndex:0,repetition:0,totalWords:0}),[l,w]=m.useState({repetitionsPerSession:3,wordPause:800,sentencePause:1200,maxWordsPerSession:15,enableBackgroundMusic:!1,speechSpeed:1,exposuresBeforeMastery:5}),[L,I]=m.useState(null);m.useEffect(()=>(e.setOnWordStart((o,v)=>{p(o),h(e.getCurrentProgress())}),e.setOnWordComplete((o,v)=>{h(e.getCurrentProgress())}),e.setOnSessionComplete(o=>{r(!1),a(!1),c(o),p(null),P()}),e.setOnSessionPause(()=>{a(!0)}),e.setOnSessionResume(()=>{a(!1)}),W(),P(),()=>{e.isSessionActive()&&e.stopSession()}),[e]);const P=m.useCallback(async()=>{const o=await e.getLearningProgress();I(o)},[e]),W=m.useCallback(async()=>{try{if((await D.getDailyLessons()).length>0){console.log("HindiEasy curriculum already initialized");return}const{initializeHindiEasyCurriculum:v}=await U(async()=>{const{initializeHindiEasyCurriculum:j}=await import("../chunks/curriculum-demo.8J5MLMuR.js");return{initializeHindiEasyCurriculum:j}},__vite__mapDeps([0,1]));await v(),console.log("HindiEasy curriculum initialized successfully")}catch(o){console.error("Failed to initialize HindiEasy curriculum:",o)}},[]),y=async()=>{try{let o=[],v="";try{let N=await D.getDailyLessons();if(N.length===0){console.log("🍎 No curriculum found, initializing HindiEasy...");const{initializeHindiEasyCurriculum:C}=await U(async()=>{const{initializeHindiEasyCurriculum:_}=await import("../chunks/curriculum-demo.8J5MLMuR.js");return{initializeHindiEasyCurriculum:_}},__vite__mapDeps([0,1]));await C(),console.log("✅ HindiEasy curriculum initialized!"),N=await D.getDailyLessons()}const F=await D.getLessonProgress();if(N.length>0){const C=N.find(_=>!F.some(O=>O.lessonId===_.id&&O.status==="completed"));C&&(console.log(`📚 Starting curriculum lesson: ${C.title}`),o=C.vocabularyItems,v=C.title,await D.updateLessonProgress({lessonId:C.id,status:T.IN_PROGRESS,wordsCompleted:0,totalWords:C.vocabularyItems.length,timeSpent:0,speedLearnSessions:0,reviewSessions:0,accuracy:0,lastActivity:Date.now()}))}}catch(N){console.log("Curriculum initialization failed, using regular vocabulary:",N)}if(o.length===0){console.log("Using regular vocabulary for Speed Learn");const N=await e.startSession(l);c(N),r(!0),a(!1);return}console.log(`🎵 Starting Speed Learn with ${o.length} words from "${v}"`);const j=await e.startSessionWithVocabulary(o,l);c(j),r(!0),a(!1)}catch(o){console.error("Failed to start Speed Learn session:",o),o instanceof Error&&o.message.includes("No words available")?alert(`No vocabulary items available for Speed Learn. Please:

1. Add vocabulary items in the Options page, OR
2. Click "Migrate Vocabulary" button below if you have existing vocabulary`):alert("Failed to start session. Please check console for details or try migrating your vocabulary.")}},b=()=>{e.pauseSession()},E=()=>{e.resumeSession()},M=async()=>{await e.stopSession(),r(!1),a(!1),p(null),c(null)},R=(o,v)=>{w(j=>({...j,[o]:v}))},V=async()=>{try{await i.constructor.initialize(),alert("Vocabulary migrated successfully! You can now start Speed Learn sessions."),await P()}catch(o){console.error("Migration failed:",o),alert("Migration failed. Please check the console for details.")}};return s.jsxs("div",{className:"speed-learn-container",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"🚀 Speed Learn"}),L&&s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-4 rounded-lg mb-4 border border-green-200",children:[s.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"🌱 Speed Learn Progress (New Learning Only)"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mb-3",children:[s.jsxs("div",{className:"bg-blue-100 p-2 rounded text-center",children:[s.jsx("div",{className:"font-bold text-blue-700",children:L.newWords}),s.jsx("div",{className:"text-blue-600",children:"New Words"})]}),s.jsxs("div",{className:"bg-yellow-100 p-2 rounded text-center",children:[s.jsx("div",{className:"font-bold text-yellow-700",children:L.learningWords}),s.jsx("div",{className:"text-yellow-600",children:"Learning"})]}),s.jsxs("div",{className:"bg-green-100 p-2 rounded text-center",children:[s.jsx("div",{className:"font-bold text-green-700",children:L.masteredWords}),s.jsx("div",{className:"text-green-600",children:"Completed"})]}),s.jsxs("div",{className:"bg-purple-100 p-2 rounded text-center",children:[s.jsx("div",{className:"font-bold text-purple-700",children:L.totalInTraditionalReviews}),s.jsx("div",{className:"text-purple-600",children:"In Reviews Tab"})]})]}),s.jsx("div",{className:"text-xs text-gray-500 text-center",children:"📝 Speed Learn = New learning only • Reviews = Traditional SRS in Reviews tab"})]}),s.jsx("div",{className:"session-controls mb-4",children:t?s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex space-x-2",children:[n?s.jsx("button",{onClick:E,className:"flex-1 bg-green-500 text-white py-2 px-4 rounded font-medium hover:bg-green-600",children:"▶️ Resume"}):s.jsx("button",{onClick:b,className:"flex-1 bg-yellow-500 text-white py-2 px-4 rounded font-medium hover:bg-yellow-600",children:"⏸️ Pause"}),s.jsx("button",{onClick:M,className:"flex-1 bg-red-500 text-white py-2 px-4 rounded font-medium hover:bg-red-600",children:"⏹️ Stop"})]})}):s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:y,className:"w-full bg-blue-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"🎵 Start Speed Learn Session"}),s.jsx("button",{onClick:V,className:"w-full bg-gray-500 text-white py-2 px-4 rounded text-sm hover:bg-gray-600",title:"Run this if Speed Learn sessions fail to start",children:"🔄 Migrate Vocabulary for Speed Learn"})]})}),t&&u&&s.jsx("div",{className:"current-word-display bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg mb-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-800 mb-2",children:u.targetLanguageWord}),s.jsx("div",{className:"text-lg text-gray-600 mb-3",children:u.englishTranslation}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Word ",x.wordIndex+1," of ",x.totalWords," • Repetition ",x.repetition+1," of ",l.repetitionsPerSession]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(x.wordIndex+x.repetition*x.totalWords)/(l.repetitionsPerSession*x.totalWords)*100}%`}})})]})}),!t&&s.jsxs("div",{className:"config-panel bg-gray-50 p-4 rounded-lg mb-4",children:[s.jsx("h3",{className:"font-medium text-gray-800 mb-3",children:"Session Settings"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:["Repetitions per session: ",l.repetitionsPerSession]}),s.jsx("input",{type:"range",min:"2",max:"5",value:l.repetitionsPerSession,onChange:o=>R("repetitionsPerSession",parseInt(o.target.value)),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:["Speech speed: ",l.speechSpeed,"x"]}),s.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:l.speechSpeed,onChange:o=>R("speechSpeed",parseFloat(o.target.value)),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:["Max words per session: ",l.maxWordsPerSession]}),s.jsx("input",{type:"range",min:"10",max:"25",value:l.maxWordsPerSession,onChange:o=>R("maxWordsPerSession",parseInt(o.target.value)),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:["Word pause: ",(l.wordPause/1e3).toFixed(1),"s"]}),s.jsx("input",{type:"range",min:"500",max:"2000",step:"100",value:l.wordPause,onChange:o=>R("wordPause",parseInt(o.target.value)),className:"w-full"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Pause between Hindi and English"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:["Sentence pause: ",(l.sentencePause/1e3).toFixed(1),"s"]}),s.jsx("input",{type:"range",min:"800",max:"3000",step:"100",value:l.sentencePause,onChange:o=>R("sentencePause",parseInt(o.target.value)),className:"w-full"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Pause between different words"})]})]})]})]})},J=()=>{const[i,e]=m.useState(null),[t,r]=m.useState(null),[n,a]=m.useState(!1),[d,c]=m.useState(!0),[u,p]=m.useState("review"),[x]=m.useState(()=>new S);m.useEffect(()=>{h()},[]);const h=async()=>{try{c(!0),await S.initialize();const y=await S.getDueVocabulary(),b=y.length>0?y[0]:null,E=await S.getLearningStats();e(b),r(E)}catch(y){console.error("Failed to load data:",y)}finally{c(!1)}},l=()=>{a(!0)},w=async y=>{if(i)try{const b=Date.now()-(n?1e4:5e3),E=Date.now()-b;await S.processVocabularyReview(i.id,y,E,b),console.log("Review processed successfully for item:",i.id),a(!1),e(null),await h()}catch(b){console.error("Failed to record review:",b)}},L=()=>{if(!i)return;const y=new SpeechSynthesisUtterance(i.targetLanguageWord);y.lang="hi-IN",y.rate=.8,speechSynthesis.speak(y)};if(d)return s.jsx("div",{className:"popup-container loading",children:s.jsx("div",{className:"loading-spinner",children:"Loading..."})});const I=()=>{switch(u){case"speedlearn":return s.jsx(Q,{storageManager:x});case"stats":return P();default:return W()}},P=()=>s.jsxs("div",{className:"stats-view",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"📊 Learning Stats"}),t&&s.jsxs("div",{className:"stats-grid grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"stat-item bg-blue-50 p-3 rounded",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.dueToday}),s.jsx("div",{className:"text-sm text-gray-600",children:"Due Today"})]}),s.jsxs("div",{className:"stat-item bg-green-50 p-3 rounded",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.totalItems}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Words"})]}),s.jsxs("div",{className:"stat-item bg-purple-50 p-3 rounded",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(t.accuracyRate*100),"%"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Accuracy"})]}),s.jsxs("div",{className:"stat-item bg-orange-50 p-3 rounded",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.reviewedToday}),s.jsx("div",{className:"text-sm text-gray-600",children:"Reviewed Today"})]})]}),s.jsx("button",{className:"w-full mt-4 bg-gray-500 text-white py-2 rounded hover:bg-gray-600",onClick:()=>chrome.runtime.openOptionsPage(),children:"⚙️ Open Settings"})]}),W=()=>i?s.jsxs("div",{className:"review-content",children:[s.jsxs("div",{className:"review-header mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"📏 Review Session"}),s.jsx("div",{className:"review-progress text-sm text-gray-600",children:t&&`${t.reviewedToday} reviewed today`})]}),s.jsxs("div",{className:"vocabulary-card bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg mb-4",children:[s.jsx("div",{className:"hindi-text text-3xl font-bold text-center mb-4 text-gray-800",children:i.targetLanguageWord}),s.jsx("div",{className:"text-center mb-4",children:s.jsx("button",{className:"audio-button bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",onClick:L,title:"Play pronunciation",children:"🔊 Play Audio"})}),n&&s.jsx("div",{className:"english-translation text-xl text-center text-gray-700 font-medium",children:i.englishTranslation})]}),s.jsx("div",{className:"action-buttons",children:n?s.jsxs("div",{className:"quality-buttons grid grid-cols-2 gap-2",children:[s.jsx("button",{className:"quality-btn bg-red-500 text-white py-2 rounded hover:bg-red-600",onClick:()=>w(1),children:"Again"}),s.jsx("button",{className:"quality-btn bg-orange-500 text-white py-2 rounded hover:bg-orange-600",onClick:()=>w(2),children:"Hard"}),s.jsx("button",{className:"quality-btn bg-green-500 text-white py-2 rounded hover:bg-green-600",onClick:()=>w(3),children:"Good"}),s.jsx("button",{className:"quality-btn bg-blue-500 text-white py-2 rounded hover:bg-blue-600",onClick:()=>w(4),children:"Easy"})]}):s.jsx("button",{className:"w-full bg-blue-500 text-white py-3 rounded-lg font-medium hover:bg-blue-600",onClick:l,children:"Show Answer"})})]}):s.jsxs("div",{className:"no-reviews-view",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"📏 Reviews"}),s.jsxs("div",{className:"no-reviews-message text-center py-8",children:[s.jsx("p",{className:"text-2xl mb-2",children:"🎉"}),s.jsx("p",{className:"text-gray-800 font-medium",children:"No reviews due right now!"}),s.jsx("p",{className:"text-gray-600",children:"Great job staying on top of your learning!"})]}),s.jsx("button",{className:"w-full bg-gray-500 text-white py-2 rounded hover:bg-gray-600",onClick:()=>chrome.runtime.openOptionsPage(),children:"⚙️ Open Settings"})]});return s.jsxs("div",{className:"popup-container w-80 bg-white",children:[s.jsxs("div",{className:"tab-navigation flex border-b border-gray-200 mb-4",children:[s.jsx("button",{className:`flex-1 py-2 px-4 text-sm font-medium ${u==="review"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>p("review"),children:"📏 Reviews"}),s.jsx("button",{className:`flex-1 py-2 px-4 text-sm font-medium ${u==="speedlearn"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>p("speedlearn"),children:"🚀 Speed Learn"}),s.jsx("button",{className:`flex-1 py-2 px-4 text-sm font-medium ${u==="stats"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>p("stats"),children:"📊 Stats"})]}),s.jsx("div",{className:"tab-content",children:I()})]})},k=document.getElementById("root");k?G(k).render(s.jsx(J,{})):console.error("Failed to find root element");export{D as C,T as L,Y as O,B as R};
