import{r,S as o,j as e,c as v}from"../chunks/storage.BWKcP7Jf.js";const y=()=>{const[a,d]=r.useState(null),[t,x]=r.useState(null),[l,u]=r.useState(!1),[j,h]=r.useState(!0);r.useEffect(()=>{m()},[]);const m=async()=>{try{h(!0),await o.initialize();const s=await o.getDueVocabulary(),n=s.length>0?s[0]:null,c=await o.getLearningStats();d(n),x(c)}catch(s){console.error("Failed to load data:",s)}finally{h(!1)}},g=()=>{u(!0)},i=async s=>{if(a)try{const n=Date.now()-(l?1e4:5e3),c=Date.now()-n;await o.processVocabularyReview(a.id,s,c,n),console.log("Review processed successfully for item:",a.id),u(!1),d(null),await m()}catch(n){console.error("Failed to record review:",n)}},N=()=>{if(!a)return;const s=new SpeechSynthesisUtterance(a.targetLanguageWord);s.lang="hi-IN",s.rate=.8,speechSynthesis.speak(s)};return j?e.jsx("div",{className:"popup-container loading",children:e.jsx("div",{className:"loading-spinner",children:"Loading..."})}):a?e.jsxs("div",{className:"popup-container review",children:[e.jsx("div",{className:"review-header",children:e.jsx("div",{className:"review-progress",children:t&&`${t.reviewedToday} reviewed today`})}),e.jsxs("div",{className:"vocabulary-card",children:[e.jsx("div",{className:"hindi-text",children:a.targetLanguageWord}),e.jsx("button",{className:"audio-button",onClick:N,title:"Play pronunciation",children:"üîä"}),l&&e.jsx("div",{className:"english-translation",children:a.englishTranslation})]}),e.jsx("div",{className:"action-buttons",children:l?e.jsxs("div",{className:"quality-buttons",children:[e.jsx("button",{className:"quality-btn again",onClick:()=>i(1),children:"Again"}),e.jsx("button",{className:"quality-btn hard",onClick:()=>i(2),children:"Hard"}),e.jsx("button",{className:"quality-btn good",onClick:()=>i(3),children:"Good"}),e.jsx("button",{className:"quality-btn easy",onClick:()=>i(4),children:"Easy"})]}):e.jsx("button",{className:"reveal-button",onClick:g,children:"Show Answer"})})]}):e.jsxs("div",{className:"popup-container no-reviews",children:[e.jsxs("div",{className:"stats-section",children:[e.jsx("h2",{children:"üìö Hindi Learning"}),t&&e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:t.dueToday}),e.jsx("span",{className:"stat-label",children:"Due Today"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-number",children:t.totalItems}),e.jsx("span",{className:"stat-label",children:"Total Words"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsxs("span",{className:"stat-number",children:[Math.round(t.accuracyRate*100),"%"]}),e.jsx("span",{className:"stat-label",children:"Accuracy"})]})]})]}),e.jsxs("div",{className:"no-reviews-message",children:[e.jsx("p",{children:"üéâ No reviews due right now!"}),e.jsx("p",{children:"Great job staying on top of your learning!"})]}),e.jsx("button",{className:"options-button",onClick:()=>chrome.runtime.openOptionsPage(),children:"‚öôÔ∏è Open Settings"})]})},p=document.getElementById("root");p?v(p).render(e.jsx(y,{})):console.error("Failed to find root element");
